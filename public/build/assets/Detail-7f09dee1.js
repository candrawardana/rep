import{_ as y,d as w,o,h as S,m as u,l as E,b as e,t as a,c,f as p,n as k,j as P,w as $,X as C}from"./app-5a739dd9.js";import{A as j,N as q}from"./AppLayout-02188963.js";import{P as N}from"./PageHeader-990117fa.js";var m="https://js.stripe.com/v3",L=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,_="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",A=function(){for(var s=document.querySelectorAll('script[src^="'.concat(m,'"]')),r=0;r<s.length;r++){var i=s[r];if(L.test(i.src))return i}return null},B=function(s){var r=s&&!s.advancedFraudSignals?"?advancedFraudSignals=false":"",i=document.createElement("script");i.src="".concat(m).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(i),i},D=function(s,r){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"1.46.0",startTime:r})},d=null,I=function(s){return d!==null||(d=new Promise(function(r,i){if(typeof window>"u"){r(null);return}if(window.Stripe&&s&&console.warn(_),window.Stripe){r(window.Stripe);return}try{var n=A();n&&s?console.warn(_):n||(n=B(s)),n.addEventListener("load",function(){window.Stripe?r(window.Stripe):i(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){i(new Error("Failed to load Stripe.js"))})}catch(l){i(l);return}})),d},T=function(s,r,i){if(s===null)return null;var n=s.apply(void 0,r);return D(n,i),n},h=Promise.resolve().then(function(){return I(null)}),f=!1;h.catch(function(t){f||console.warn(t)});var R=function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];f=!0;var n=Date.now();return h.then(function(l){return T(l,r,n)})};const V=w({components:{AppLayout:j,Navbar:q,PageHeader:N},props:["pricing_plan","modules","intent"],async mounted(){if(this.$page.props.auth.user[this.pricing_plan.type].pricing_plan_id==this.pricing_plan.id&&(this.subscribed=!0),this.pricing_plan.is_paid&&this.$page.props.settings.stripe_key){const t=this.$page.props.settings.stripe_key;this.stripe=await R(t);const s=this.stripe.elements();this.cardElement=s.create("card",{classes:{base:""}}),this.cardElement.mount("#card-element")}},data(){return{stripe:{},subscribed:!1,cardElement:{},form:this.$inertia.form({token:""})}},created(){},methods:{async submit(){if(this.pricing_plan.is_paid){const{setupIntent:t,error:s}=await this.stripe.confirmCardSetup(this.intent.client_secret,{payment_method:{card:this.cardElement,billing_details:{name:this.form.name}}});s?this.$toast.error(s.message):(this.form.token=t.payment_method,this.form.post(this.route("pricing.subscription",{type:this.pricing_plan.type,slug:this.pricing_plan.slug}),{onSuccess:()=>{}}))}else this.form.post(this.route("pricing.subscription",{type:this.pricing_plan.type,slug:this.pricing_plan.slug}),{onSuccess:()=>{}})}}}),W={class:"container-fluid py-5 border-bottom border-dark"},F={class:"row"},G={class:"col-12"},M={class:"fs-2 text-center"},X={class:"fw-normal"},U={key:0,class:"fw-bold"},x={key:1,class:"fw-bold"},z={class:"text-center mb-0"},H={class:"section pricing-plan"},O={class:"container"},Y={class:"row"},J={class:"col-12"},K={class:"row justify-content-center"},Q={class:"col-md-4"},Z={class:"card bg-transparent border-0"},ee={class:"card-body rounded",style:{"background-color":"#f4f4f4"}},te={class:"text-center mb-0",style:{color:"#744fb9"}},se={class:"card-title text-center"},ie={class:"fw-bold fs-1"},re={key:0},ne={class:"card-text text-center"},ae={key:0,class:"alert alert-success mt-3",role:"alert"},oe={key:0,class:"col-md-5"},ce=e("input",{type:"hidden",name:"pricing_plan",id:"pricing_plan",value:"{{ $pricing_plan->id }}"},null,-1),le={key:0,class:"px-lg-4"},de={class:"row"},pe={class:"col-12"},ue={class:"form-group mb-4"},_e=e("label",{for:"name"},"Name",-1),me={type:"text",class:"form-control",placeholder:"Name on the card"},he=e("div",{class:"form-group mb-4"},[e("label",{for:"card-element"},"Card details"),e("div",{class:"form-control",id:"card-element"})],-1),fe=["disabled"],ge={key:1,class:"px-lg-4"},be=e("p",null,"lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur ac scelerisque ante. Curabitur vehicula sagittis sem, eget pellentesque augue congue eget. Nulla facilisi. In sapien lectus, aliquam a risus vitae, faucibus maximus massa. Mauris tempus sed neque quis pulvinar. Pellentesque sed lacus egestas, ",-1),ve=e("button",{type:"submit",class:"btn btn-primary",id:"card-button","data-secret":"{{ $intent->client_secret }}"}," Purchase ",-1),ye=[be,ve];function we(t,s,r,i,n,l){const g=E("app-layout"),b=C("mode");return o(),S(g,{title:"Pricing Plan"},{header:u(()=>[]),default:u(()=>[e("div",W,[e("div",F,[e("div",G,[e("h2",M,[e("span",X,a(t.__("Pricing Plan"))+" | ",1),t.subscribed?(o(),c("span",x,a("already subscribed"))):(o(),c("span",U,a("you have selected")))]),e("p",z,a(t.__("discover The Best Lawyers Near You")),1)])])]),e("div",H,[e("div",O,[e("div",Y,[e("div",J,[e("div",K,[e("div",Q,[e("div",Z,[e("div",ee,[e("h5",te,a(t.__("subscription")),1),e("h4",se,[e("span",ie,a(t.pricing_plan.name),1),t.pricing_plan.is_paid?p("",!0):(o(),c("span",re,"("+a(t.__("free"))+")",1))]),e("p",ne,a(t.pricing_plan.tagline),1),e("div",{class:"tag text-center py-2 text-white fs-3 rounded-pill",style:k({backgroundColor:t.pricing_plan.color||"#6c757d"})},a(t.getDisplayAmount(t.pricing_plan.price))+"/"+a(t.__("month")),5)]),t.subscribed?(o(),c("div",ae,"you are already subscribed to this plan")):p("",!0)])]),t.subscribed?p("",!0):(o(),c("div",oe,[e("form",{onSubmit:s[0]||(s[0]=P((...v)=>t.submit&&t.submit(...v),["prevent"])),id:"payment-form"},[ce,t.pricing_plan.is_paid?(o(),c("div",le,[e("div",de,[e("div",pe,[e("div",ue,[_e,$(e("input",me,null,512),[[b,t.form.name]])]),he,e("button",{type:"submit",disabled:t.form.processing,class:"btn btn-primary",id:"card-button","data-secret":"{{ $intent->client_secret }}"}," Purchase ",8,fe)])])])):(o(),c("div",ge,ye))],32)]))])])])])])]),_:1})}const Pe=y(V,[["render",we]]);export{Pe as default};
