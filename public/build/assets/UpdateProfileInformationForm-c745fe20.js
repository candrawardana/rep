import{_ as b,d as y,o as p,h as c,m as s,l,i as r,e as n,c as S,b as o,w as a,x as d,j as v,f as P,v as _,k as u}from"./app-5a739dd9.js";import{B as $}from"./Button-835ef4ee.js";import{F as I}from"./FormSection-bdb31caa.js";import{I as k}from"./Input-8812850b.js";import{I as C}from"./InputError-8e109f03.js";import{L as B}from"./Label-fbb29e9e.js";import{A as N}from"./ActionMessage-643c7cc0.js";import{S as F}from"./SecondaryButton-ae55756a.js";const U=y({components:{ActionMessage:N,Button:$,FormSection:I,Input:k,InputError:C,Label:B,SecondaryButton:F},props:["user"],data(){return{form:this.$inertia.form({_method:"PUT",name:this.user.name,email:this.user.email,photo:null}),photoPreview:null}},methods:{updateProfileInformation(){this.$refs.photo&&(this.form.photo=this.$refs.photo.files[0]),this.form.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>this.clearPhotoFileInput()})},selectNewPhoto(){this.$refs.photo.click()},updatePhotoPreview(){const e=this.$refs.photo.files[0];if(!e)return;const t=new FileReader;t.onload=h=>{this.photoPreview=h.target.result},t.readAsDataURL(e)},deletePhoto(){this.$inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{this.photoPreview=null,this.clearPhotoFileInput()}})},clearPhotoFileInput(){var e;(e=this.$refs.photo)!=null&&e.value&&(this.$refs.photo.value=null)}}}),V={key:0,class:"mb-3"},A=o("label",{for:"photo",value:"Photo"},null,-1),L={class:"mt-2"},E=["src"],M={class:"mt-2"},R=["src"],T={class:"w-75"},j={class:"mb-3"},D=o("label",{for:"name",value:"Name"},null,-1),z={class:"mb-3"},q=o("label",{for:"email",value:"Email"},null,-1),G=["disabled"],H={class:"spinner-border spinner-border-sm",role:"status"},J=o("span",{class:"visually-hidden"},"Loading...",-1),K=[J];function O(e,t,h,Q,W,X){const g=l("action-message"),f=l("secondary-button"),m=l("input-error"),w=l("form-section");return p(),c(w,{onSubmitted:e.updateProfileInformation},{title:s(()=>[r(" Profile Information ")]),description:s(()=>[r(" Update your account's profile information and email address. ")]),form:s(()=>[n(g,{on:e.form.recentlySuccessful},{default:s(()=>[r(" Saved. ")]),_:1},8,["on"]),e.$page.props.jetstream.managesProfilePhotos?(p(),S("div",V,[o("input",{type:"file",hidden:"",ref:"photo",onChange:t[0]||(t[0]=(...i)=>e.updatePhotoPreview&&e.updatePhotoPreview(...i))},null,544),A,a(o("div",L,[o("img",{src:e.user.profile_photo_url,alt:"Current Profile Photo",class:"rounded-circle"},null,8,E)],512),[[d,!e.photoPreview]]),a(o("div",M,[o("img",{src:e.photoPreview,class:"rounded-circle",width:"80px",height:"80px"},null,8,R)],512),[[d,e.photoPreview]]),n(f,{class:"mt-2 me-2",type:"button",onClick:v(e.selectNewPhoto,["prevent"])},{default:s(()=>[r(" Select A New Photo ")]),_:1},8,["onClick"]),e.user.profile_photo_path?(p(),c(f,{key:0,type:"button",class:"mt-2",onClick:v(e.deletePhoto,["prevent"])},{default:s(()=>[r(" Remove Photo ")]),_:1},8,["onClick"])):P("",!0),n(m,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])])):P("",!0),o("div",T,[o("div",j,[D,a(o("input",{id:"name",type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>e.form.name=i),class:u({"is-invalid":e.form.errors.name}),autocomplete:"name"},null,2),[[_,e.form.name]]),n(m,{message:e.form.errors.name},null,8,["message"])]),o("div",z,[q,a(o("input",{id:"email",type:"email","onUpdate:modelValue":t[2]||(t[2]=i=>e.form.email=i),class:u({"is-invalid":e.form.errors.email})},null,2),[[_,e.form.email]]),n(m,{message:e.form.errors.email},null,8,["message"])])])]),actions:s(()=>[o("button",{class:u({"text-white-50":e.form.processing}),disabled:e.form.processing},[a(o("div",H,K,512),[[d,e.form.processing]]),r(" Save ")],10,G)]),_:1},8,["onSubmitted"])}const ie=b(U,[["render",O]]);export{ie as default};
